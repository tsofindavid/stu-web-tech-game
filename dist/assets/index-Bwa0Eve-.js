(function(){const relList=document.createElement("link").relList;if(relList&&relList.supports&&relList.supports("modulepreload"))return;for(const link of document.querySelectorAll('link[rel="modulepreload"]'))processPreload(link);new MutationObserver(mutations=>{for(const mutation of mutations)if(mutation.type==="childList")for(const node of mutation.addedNodes)node.tagName==="LINK"&&node.rel==="modulepreload"&&processPreload(node)}).observe(document,{childList:!0,subtree:!0});function getFetchOpts(link){const fetchOpts={};return link.integrity&&(fetchOpts.integrity=link.integrity),link.referrerPolicy&&(fetchOpts.referrerPolicy=link.referrerPolicy),link.crossOrigin==="use-credentials"?fetchOpts.credentials="include":link.crossOrigin==="anonymous"?fetchOpts.credentials="omit":fetchOpts.credentials="same-origin",fetchOpts}function processPreload(link){if(link.ep)return;link.ep=!0;const fetchOpts=getFetchOpts(link);fetch(link.href,fetchOpts)}})();let effects=[],cleanUps=[];function useEffect(fn){effects.push(fn)}function runEffects(){effects.forEach(fn=>{cleanUps.forEach(cleanUp2=>{cleanUp2()}),cleanUps=[];const cleanUp=fn();cleanUp&&cleanUps.push(cleanUp)}),effects=[]}function h(type,props,...children){if(type===Fragment)return children;const el=document.createElement(type);for(const[key,value]of Object.entries(props||{}))key==="ref"&&typeof value=="function"?value(el):key.startsWith("on")?el.addEventListener(key.slice(2).toLowerCase(),value):el.setAttribute(key,value);return children.flat().forEach(child=>{child!=null&&el.append(child instanceof Node?child:document.createTextNode(child))}),el}function Fragment(_,...children){return children}function render(node){const app=document.getElementById("app");app.innerHTML="",app.append(node)}function navigate(page){location.hash=page}function initRouter(routes,home=""){function update(){const page=location.hash.slice(1)||home;render(routes[page]()),runEffects()}window.addEventListener("hashchange",update),update()}function useState(initial){let value=initial;const subscribers=new Set;return{get:()=>value,set:newValue=>{value=newValue,subscribers.forEach(fn=>{fn(value)})},subscribe:fn=>(subscribers.add(fn),fn(value),()=>subscribers.delete(fn))}}function useStyle(css){const styleEl=document.createElement("style");return styleEl.textContent=css,document.head.appendChild(styleEl),{cleanUp:()=>{styleEl.remove()}}}const STORE_KEY="redirect.store";class LocalStorage{#store={};constructor(){const item=localStorage.getItem(STORE_KEY);item&&(this.#store=JSON.parse(item))}set(key,value){this.#store[key]=value}get(key){return this.#store[key]}delete(key){delete this.#store[key]}clean(){this.#store={}}save(){localStorage.setItem(STORE_KEY,JSON.stringify(this.#store))}}const store=new LocalStorage;class BaseItem{_elem=null;_content=null;_html=null;_x=0;_y=0;_dataset=[];_className;get elem(){return this._elem}get content(){return this._content}get html(){return this._html}get dataset(){return this._dataset}get pos(){return{x:this._x,y:this._y}}set pos({x,y}){this._x=x,this._y=y}constructor(x,y,className){this._elem=document.createElement("div"),this._x=x,this._y=y,this._className=className,this._dataset=[["x",this._x],["y",this._y]],this.upsert()}upsert(){this._elem.className=this._className;for(const[k,v]of this.dataset)this._elem.dataset[k]=v;return this._content&&(this._elem.textContent=this._content),this._html&&(this._elem.innerHTML=this._html),this}}class Cell extends BaseItem{constructor(x,y){super(x,y,Cell.name)}}const DIRECTION={up:"up",down:"down",left:"left",right:"right"},DIRECTION_CONTENT={[DIRECTION.up]:"â†‘",[DIRECTION.down]:"â†“",[DIRECTION.left]:"â†",[DIRECTION.right]:"â†’"};class Indicator extends BaseItem{constructor(x,y,dir){super(x,y,Indicator.name),this._content=DIRECTION_CONTENT[dir],this._dataset.push(["dir",dir]),this.upsert()}}const EVENT={moves:"_moves",level:"_level",time:"_time",score:"_score",end:"_end"};class Board{#size=0;#grid;#timer;#state={};#score=0;#time=0;#moves=0;#level=0;#callbacks={seq:0,...Object.values(EVENT).reduce((obj,event)=>({...obj,[event]:{}}),{})};setGrid(grid){this.#grid=grid}placeIndicator(x,y,dir){const cell=this.#state[x][y];if(!cell||!this.getMoves())return;for(const el of cell.elem.querySelectorAll("div"))(el.classList.contains("Indicator")||el.tagName==="DIV")&&el.remove();const indicator=new Indicator(x,y,dir);cell.elem.addEventListener("dblclick",()=>{indicator.elem.remove()},{once:!0}),cell.elem.addEventListener("touchend",e=>{const currentTime=Date.now(),tapLength=currentTime-this.lastTap;tapLength<500&&tapLength>0?(e.preventDefault(),indicator.elem.remove()):this.isPinching=!1,this.lastTap=currentTime}),cell.elem.appendChild(indicator.elem),this.nextMove()}init(){this.#grid.style.setProperty("--grid-size",this.#size);for(let x=0;x<this.#size;x++){this.#state[x]||(this.#state[x]={});for(let y=0;y<this.#size;y++){this.#state[x][y]||(this.#state[x][y]={});const cell=new Cell(x,y);cell.elem.dataset.x=x,cell.elem.dataset.y=y,cell.elem.classList.add("grid-cell"),cell.elem.addEventListener("dragover",e=>{e.preventDefault(),cell.elem.classList.add("drag-over")}),cell.elem.addEventListener("dragleave",e=>{e.preventDefault(),cell.elem.classList.remove("drag-over")}),cell.elem.addEventListener("drop",e=>{e.preventDefault(),cell.elem.classList.remove("drag-over"),this.placeIndicator(x,y,e.dataTransfer.getData("text/plain"))}),this.#state[x][y]=cell,this.#grid.appendChild(cell.elem)}}}getSize(){return this.#size}setSize(size){return this.#size=size}getMoves(){return this.#moves}setMoves(moves2){return this.#moves=moves2}nextMove(){this.#moves--,this.eventEmit(EVENT.moves,this.#moves)}getLevel(){return this.#level}setLevel(level2){this.#level=level2,this.eventEmit(EVENT.level,this.#level)}getTime(){return this.#time}setTime(time2){return this.#time=time2}getScore(){return this.#score}setScore(score2){return this.eventEmit(EVENT.score,score2),this.#score=score2}getCell(x,y){return this.#state[x][y].elem.querySelector("div")}timerStart(){this.#timer=()=>{if(this.#time<=0){this.eventEmit(EVENT.end,{});return}this.#time--,this.eventEmit(EVENT.time,this.#time),this.#timer&&setTimeout(this.#timer,1e3)},this.#timer()}timerReset(){this.#time=0}timerStop(){this.#timer=void 0}eventSubscribe(event,callback){const seq=this.#callbacks.seq+1,r={unsubscribe:()=>{delete this.#callbacks[event][seq]}};return this.#callbacks[event][seq]=data=>{callback({...r,data})},this.#callbacks.seq=seq,r}eventEmit(event,data){Object.values(this.#callbacks[event]).forEach(callback=>{callback(data)})}eventEmitAll(){this.eventEmit(EVENT.level,this.#level),this.eventEmit(EVENT.moves,this.#moves),this.eventEmit(EVENT.time,this.#time),this.eventEmit(EVENT.score,this.#score)}boardReset(){this.#grid.innerHTML="",this.#state={}}itemCreate(x,y,Item){const cell=this.#state[x][y],item=new Item(x,y);return cell.elem.appendChild(item.elem),item}itemMove(x,y,item){const oldPos=item.pos;this.#state[x][y].elem.appendChild(item.elem),item.pos={x,y},this.#state[oldPos.x][oldPos.y].innerHTML=""}itemDelete(item){const{x,y}=item.pos;this.#state[x][y].innerHTML="",item.remove()}}class Actor extends BaseItem{constructor(x,y){super(x,y,Actor.name)}}class End extends BaseItem{constructor(x,y){super(x,y,End.name)}}class Mountain extends BaseItem{constructor(x,y){super(x,y,Mountain.name)}}class Start extends BaseItem{constructor(x,y){super(x,y,Start.name)}}class Game{#board;#levels;#level;#dir;#actor;#loop;#end;calculateScore(){let score2=this.#board.getScore();score2+=this.#board.getTime()*10,score2+=this.#board.getMoves()*50,score2+=this.#board.getSize()*20,this.#board.setScore(score2)}setBoard(b){this.#board=b}setLevels(l){this.#levels=l}configure(){this.#board.boardReset(),this.#board.setSize(this.#level.size),this.#board.setTime(this.#level.time),this.#board.setMoves(this.#level.moves),this.#board.init(),this.#dir=this.#level.dir,this.#actor=this.#board.itemCreate(this.#level.start.x,this.#level.start.y,Actor),this.#board.itemCreate(this.#level.start.x,this.#level.start.y,Start),this.#board.itemCreate(this.#level.end.x,this.#level.end.y,End);for(const{x,y}of this.#level.mountains)this.#board.itemCreate(x,y,Mountain);this.#board.eventEmitAll()}nextLevel(){this.calculateScore();const level2=this.#board.getLevel()+1;this.#board.setLevel(level2),this.#level=this.#levels[level2],this.#level||this.stop(),this.configure()}step(){let x=this.#actor.pos.x,y=this.#actor.pos.y;this.#dir===DIRECTION.right&&(y=this.#actor.pos.y+1),this.#dir===DIRECTION.left&&(y=this.#actor.pos.y-1),this.#dir===DIRECTION.down&&(x=this.#actor.pos.x+1),this.#dir===DIRECTION.up&&(x=this.#actor.pos.x-1);const size=this.#board.getSize();(x>=size||y>=size||x<0||y<0)&&(this.#dir=this.#level.dir,x=this.#level.start.x,y=this.#level.start.y);const cell=this.#board.getCell(x,y);if(cell&&(cell.className===Indicator.name&&(this.#dir=cell.getAttribute("data-dir")),cell.className===Mountain.name&&(this.#dir=this.#level.dir,x=this.#level.start.x,y=this.#level.start.y),cell.className===End.name))return this.nextLevel();this.#board.itemMove(x,y,this.#actor)}start(){this.#level=this.#levels[this.#board.getLevel()],this.configure(),this.#loop=this.#board.eventSubscribe(EVENT.time,()=>{this.step()}),this.#end=this.#board.eventSubscribe(EVENT.end,()=>{this.stop()}),this.#board.timerStart()}stop(){this.#loop.unsubscribe(),this.#end.unsubscribe(),this.#board.timerStop(),this.#board.eventEmit(EVENT.end,{moves:this.#board.getMoves(),time:this.#board.getTime()})}}const styles$2='.container{display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:100vh;text-align:center;padding:20px}.header{width:100%;display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;gap:15px;margin-bottom:30px;padding-bottom:15px;border-bottom:2px solid var(--border-color)}.title{flex-basis:100%;font-size:2.5em;color:var(--color-function);margin:0;text-shadow:0 0 10px rgba(122,162,247,.3)}.level-info{width:100%;display:flex;flex-wrap:wrap;justify-content:center;gap:20px;font-size:1.2em;text-shadow:0 0 10px rgba(122,162,247,.3)}.level-info span{padding:8px 16px;background-color:var(--bg-tertiary);border-radius:6px;color:var(--fg-secondary);white-space:nowrap}.game-area{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;gap:30px}.grid-container{display:flex;justify-content:center;align-items:center;width:100%;overflow-x:auto}.grid{display:grid;grid-template-columns:repeat(var(--grid-size, 8),1fr);grid-template-rows:repeat(var(--grid-size, 8),1fr);gap:2px;width:500px;height:500px;padding:10px;background-color:var(--bg-secondary);border:2px solid var(--border-color);border-radius:8px;animation:fadeIn .8s ease-out;flex-shrink:0}.Cell{position:relative;display:flex;justify-content:center;align-items:center;background-color:var(--bg-tertiary);border-radius:4px;overflow:visible;transition:all .2s ease}.Cell:hover{background-color:var(--cursor-line);transform:scale(1.05)}.Cell:active{transform:scale(.98)}.Actor,.Start,.End,.Mountain,.indicator{position:absolute;inset:0;display:flex;justify-content:center;align-items:center;pointer-events:none}.Start,.End{z-index:10}.indicator{z-index:20}.Actor{z-index:30}.Mountain:after{content:"â›°ï¸Ž";font-size:2rem}.Actor:after{content:"ðŸ¥¸";font-size:2rem}.Start:after{content:"ðŸ“";font-size:2rem}.End:after{content:"ðŸ";font-size:2rem}.cell.drag-over{background-color:var(--selection-bg);border:2px dashed var(--color-function)}.toolbar{display:flex;flex-wrap:wrap;justify-content:center;align-items:center;gap:15px;max-width:600px;width:100%;padding:15px;background-color:var(--bg-float);border:2px solid var(--border-color);border-radius:8px;animation:fadeIn .8s ease-out .2s both}.tool{width:60px;height:60px;padding:0;background-color:var(--bg-tertiary);border:2px solid transparent;border-radius:8px;display:flex;justify-content:center;align-items:center;font-size:1.5em;cursor:grab;transition:all .2s ease;touch-action:none;-webkit-user-select:none;user-select:none}.tool:hover{background-color:var(--cursor-line);transform:translateY(-3px);box-shadow:0 5px 10px #0003}.tool:active{cursor:grabbing}.tool.dragging{opacity:.7;transform:scale(.95)}.controls{display:flex;flex-wrap:wrap;justify-content:center;align-items:center;gap:20px;margin-top:20px;width:100%;animation:fadeIn .8s ease-out .4s both}.btn{padding:12px 24px;border:none;border-radius:6px;font-size:1.1em;cursor:pointer;transition:all .3s ease;white-space:nowrap;min-height:44px}.primary-btn{background-color:var(--color-success);color:var(--bg-primary)}.primary-btn:hover{background-color:var(--color-string);transform:translateY(-2px);box-shadow:0 5px 15px #9ece6a4d}.primary-btn:active{transform:translateY(0)}.secondary-btn{background-color:var(--color-function);color:var(--bg-primary)}.secondary-btn:hover{background-color:var(--color-type);transform:translateY(-2px);box-shadow:0 5px 15px #7dcfff4d}.secondary-btn:active{transform:translateY(0)}@keyframes fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 575.98px){.container{padding:10px;min-height:auto}.header{margin-bottom:15px;padding-bottom:10px}.title{font-size:1.8em}.level-info{font-size:.95em;gap:10px}.level-info span{padding:6px 12px;font-size:.9em}.game-area{gap:15px}.grid{width:100%;height:auto;aspect-ratio:1;max-width:400px;padding:8px;gap:1px}.Mountain:after,.Actor:after,.Start:after,.End:after{font-size:1.5rem}.toolbar{max-width:100%;gap:10px;padding:10px}.tool{width:50px;height:50px;font-size:1.2em}.controls{gap:10px;margin-top:15px}.btn{padding:10px 16px;font-size:1em;flex:1;min-width:120px}}@media (min-width: 576px) and (max-width: 767.98px){.container{padding:15px}.title{font-size:2em}.level-info{font-size:1.05em;gap:15px}.grid{width:80%;max-width:450px;aspect-ratio:1}.tool{width:55px;height:55px}.controls{gap:15px}.btn{padding:11px 20px;font-size:1.05em}}@media (min-width: 768px){.container{padding:20px}.title{font-size:2.3em}.level-info{font-size:1.15em}.grid{width:500px;height:500px}.tool{width:60px;height:60px}.toolbar{max-width:600px}.controls{gap:20px}.btn{padding:12px 24px;font-size:1.1em}}@media (min-width: 992px){.container{padding:20px}.title{font-size:2.5em}.level-info{font-size:1.2em}}@media (hover: none) and (pointer: coarse){.Cell:hover{background-color:var(--bg-tertiary);transform:none}.tool:hover,.btn:hover{transform:none}.Cell:active{background-color:var(--cursor-line);transform:scale(.98)}.tool:active{background-color:var(--cursor-line)}.btn:active{background-color:var(--color-string)}}',level=useState(0),moves=useState(0),time=useState(0),score=useState(0);function GamePage(){let levelEl,timeEl,movesEl,scoreEl,gridEl,onPause=!1;const game=new Game,board=new Board,initState=()=>{level.subscribe(value=>{levelEl&&(levelEl.textContent=value)}),moves.subscribe(value=>{movesEl&&(movesEl.textContent=value)}),time.subscribe(value=>{timeEl&&(timeEl.textContent=value)}),score.subscribe(value=>{scoreEl&&(scoreEl.textContent=value)})},initDragDrop=()=>{document.querySelectorAll(".tool").forEach(tool=>{tool.addEventListener("dragstart",function(e){e.dataTransfer.setData("text/plain",this.dataset.direction),this.classList.add("dragging")}),tool.addEventListener("dragend",function(){this.classList.remove("dragging")}),tool.addEventListener("touchstart",function(e){const touch=e.touches[0],clone=this.cloneNode(!0);clone.classList.add("dragging-clone"),clone.style.position="fixed",clone.style.left=`${touch.clientX}px`,clone.style.top=`${touch.clientY}px`,clone.style.transform="translate(-50%, -50%)",clone.style.pointerEvents="none",clone.style.zIndex="9999",clone.style.opacity="0.7",document.body.appendChild(clone),this._clone=clone},{passive:!1}),tool.addEventListener("touchmove",function(e){this._clone&&(e.preventDefault(),this._clone.style.left=`${e.touches[0].clientX}px`,this._clone.style.top=`${e.touches[0].clientY}px`)},{passive:!1}),tool.addEventListener("touchend",function(e){if(!this._clone)return;const touch=e.changedTouches[0],targetEl=document.elementFromPoint(touch.clientX,touch.clientY),cellElem=targetEl?targetEl.closest(".grid-cell"):null;cellElem&&board.placeIndicator(cellElem.dataset.x,cellElem.dataset.y,this.dataset.direction),this._clone.remove(),this._clone=null})})};return useEffect(()=>{const style=useStyle(styles$2);board.setGrid(gridEl),game.setBoard(board),initState(),initDragDrop();const levelEvent=board.eventSubscribe(EVENT.level,({data})=>{level.set(data+1)}),moveEvent=board.eventSubscribe(EVENT.moves,({data})=>{moves.set(data)}),timeEvent=board.eventSubscribe(EVENT.time,({data})=>{const min=Math.floor(data/60).toString().padStart(2,"0"),sec=(data%60).toString().padStart(2,"0");time.set(`${min}:${sec}`)}),scoreEvent=board.eventSubscribe(EVENT.score,({data})=>{score.set(data)});fetch("levels.json").then(d=>d.json()).then(l=>{game.setLevels(l),game.start(l)});const endEvent=board.eventSubscribe(EVENT.end,()=>{const r=store.get("game");r?.length&&(r.at(-1).level=board.getLevel(),r.at(-1).score=board.getScore(),store.set("game",r),store.save()),navigate("score")});return()=>{levelEvent.unsubscribe(),moveEvent.unsubscribe(),timeEvent.unsubscribe(),scoreEvent.unsubscribe(),endEvent.unsubscribe(),style.cleanUp()}}),h("div",null,h("div",{class:"container"},h("div",{class:"header"},h("h1",{class:"title"},"Level: ",h("span",{ref:el=>levelEl=el})),h("div",{class:"level-info"},h("span",{id:"levelMoves"},"Moves: ",h("span",{ref:el=>movesEl=el})),h("span",{id:"levelTime"},"Time: ",h("span",{ref:el=>timeEl=el})),h("span",{id:"levelTime"},"Score: ",h("span",{ref:el=>scoreEl=el})))),h("div",{class:"game-area"},h("div",{class:"grid-container"},h("div",{class:"grid",ref:el=>gridEl=el})),h("div",{class:"toolbar",id:"toolbar"},h("div",{class:"tool","data-direction":"up",draggable:"true"},"â†‘"),h("div",{class:"tool","data-direction":"down",draggable:"true"},"â†“"),h("div",{class:"tool","data-direction":"left",draggable:"true"},"â†"),h("div",{class:"tool","data-direction":"right",draggable:"true"},"â†’")),h("div",{class:"controls"},h("button",{type:"button",class:"btn secondary-btn",onClick:()=>{game.stop()}},"Exit Game"),h("button",{type:"button",class:"btn secondary-btn",onClick:function(){onPause?(onPause=!1,this.textContent="Pause",board.timerStart()):(onPause=!0,this.textContent="Resume",board.timerStop())}},"Pause"),h("button",{type:"button",class:"btn secondary-btn",onClick:()=>{game.configure()}},"Restart")))))}const styles$1=".container{display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:100vh;text-align:center;padding:20px}.title{font-size:4em;margin-bottom:20px;color:var(--color-function);text-shadow:0 0 10px rgba(122,162,247,.3);animation:fadeInUp .8s ease-out}.description{font-size:1.2em;max-width:600px;margin-bottom:30px;color:var(--fg-secondary);line-height:1.6;animation:fadeInUp .8s ease-out .2s both}.input-container{margin:30px 0;width:100%;max-width:400px;animation:fadeInUp .8s ease-out .4s both}.name-input{width:100%;padding:12px 16px;background-color:var(--bg-tertiary);border:2px solid var(--border-color);border-radius:8px;color:var(--fg-primary);font-size:1.1em;transition:all .3s ease;box-sizing:border-box}.name-input:focus{outline:none;border-color:var(--color-function);box-shadow:0 0 0 3px #7aa2f733}.start-btn,.secondary-btn{border:none;border-radius:8px;padding:14px 40px;font-size:1.2em;cursor:pointer;transition:all .3s ease;margin-top:20px;animation:fadeInUp .8s ease-out .6s both}.start-btn{background-color:var(--color-success);color:var(--bg-primary)}.secondary-btn{background-color:var(--color-function);color:var(--bg-tertiary);margin-top:10px}.start-btn:hover{background-color:var(--color-string);transform:translateY(-2px);box-shadow:0 5px 15px #9ece6a4d}.secondary-btn:hover{background-color:var(--color-type);transform:translateY(-2px);box-shadow:0 5px 15px #7dcfff4d}.start-btn:active,.secondary-btn:active{transform:translateY(0)}dialog{background:var(--bg-tertiary);color:var(--fg-secondary);border:2px solid var(--color-function);border-radius:12px;padding:30px;max-width:400px;width:90%;box-shadow:0 10px 30px #00000080;animation:fadeInUp .4s ease-out}dialog::backdrop{background:#000000b3;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}dialog h2{color:var(--color-function);margin-top:0;font-size:1.8em}@keyframes fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 575.98px){dialog{padding:20px}dialog h2{font-size:1.5em}}@media (max-width: 575.98px){.container{padding:15px;min-height:100vh}.title{font-size:2em;margin-bottom:15px}.description{font-size:1em;margin-bottom:20px}.input-container{margin:20px 0}.name-input{padding:10px 14px;font-size:1em}.start-btn{padding:12px 40px;font-size:1em}.secondary-btn{padding:12px 20px;font-size:1em;margin-top:8px}.start-btn:hover,.secondary-btn:hover{transform:none}.start-btn:active{background-color:var(--color-string)}.secondary-btn:active{background-color:var(--color-type)}}@media (min-width: 576px) and (max-width: 767.98px){.container{padding:15px}.title{font-size:2.8em;margin-bottom:18px}.description{font-size:1.05em;margin-bottom:25px}.input-container{max-width:380px}.start-btn,.secondary-btn{padding:13px 35px;font-size:1.1em}}@media (min-width: 768px){.container{padding:20px}.title{font-size:3.5em}.description{font-size:1.15em}}@media (min-width: 992px){.title{font-size:4em}.input-container{max-width:450px}}@media (hover: none) and (pointer: coarse){.start-btn:hover,.secondary-btn:hover{transform:none}.start-btn:active{background-color:var(--color-string)}.secondary-btn:active{background-color:var(--color-type)}}";function MenuPage(){let confirmEl,howToEl;useEffect(()=>useStyle(styles$1).cleanUp);const onClickGame=()=>{const name=document.getElementById("nameInput").value?.trim();if(!name){confirmEl.showModal(),nameInput.focus();return}let r=store.get("game");r?r.push({date:Date.now(),name,score:0,level:0}):r=[{date:Date.now(),name,score:0,level:0}],store.set("game",r),store.save(),navigate("game")};return h("div",{class:"container"},h("h1",{class:"title"},"REDIRECT GAME"),h("dialog",{ref:el=>confirmEl=el},h("h2",null,"Bro, we cant continue without your name. Just do it!"),h("div",{class:"modal-actions"},h("button",{type:"button",class:"secondary-btn",onClick:()=>{confirmEl.close()}},"OK"))),h("dialog",{ref:el=>howToEl=el},h("h2",null,"How to Play"),h("p",null,"1. Enter a nickname and start the game."),h("p",null,"2. The emoji moves from the starting point in a specific direction."),h("p",null,"3. Place arrows to guide the emoji; double-click an arrow to delete it."),h("p",null,"4. You have a limited time and a set number of arrows."),h("p",null,"5. Guide the emoji to the finish line without crashing."),h("p",null,"6. Earn points by completing levels and track your progress in the history."),h("div",{class:"modal-actions"},h("button",{type:"button",class:"secondary-btn",onClick:()=>{howToEl.close()}},"OK"))),h("p",{class:"description"},"As a ",h("strong",null,"Stream Operator"),", you must deploy ",h("strong",null,"Quantum Beacons")," to bypass Obsidian Mountains and guide the signal to the Core before it decays.",h("strong",null,"One wrong turn, and the data is purged.")),h("div",{class:"input-container"},h("input",{id:"nameInput",type:"text",class:"name-input",placeholder:"Enter your name"})),h("button",{type:"button",onClick:()=>onClickGame(),class:"start-btn"},"Start Game"),h("button",{type:"button",onClick:()=>{howToEl.showModal()},class:"secondary-btn"},"How to play"),h("button",{type:"button",onClick:()=>navigate("score"),class:"secondary-btn"},"Score History"))}const styles=".container{display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:100vh;text-align:center;padding:20px}.title{font-size:4em;margin-bottom:30px;color:var(--color-function);text-shadow:0 0 10px rgba(122,162,247,.3);animation:fadeInUp .8s ease-out}.tries-list{width:100%;max-width:900px;margin-bottom:30px;overflow-x:auto}.try-item{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:15px;align-items:center;background:var(--bg-tertiary);padding:15px;margin:10px 0;border-left:4px solid var(--color-function);border-radius:6px;animation:fadeInUp .8s ease-out .2s both}.try-date{color:var(--color-type);font-weight:500}.try-details{display:contents;color:var(--fg-secondary);font-size:.95em}.try-details span{text-align:center}.empty-message{color:var(--fg-secondary);font-size:1.2em;margin:40px 0;animation:fadeInUp .8s ease-out .2s both}.secondary-btn{background-color:var(--color-function);color:var(--bg-tertiary);border:none;border-radius:8px;padding:14px 40px;font-size:1.2em;cursor:pointer;transition:all .3s ease;margin-top:10px;margin-right:10px;animation:fadeInUp .8s ease-out .4s both}.secondary-btn:hover{background-color:var(--color-type);transform:translateY(-2px);box-shadow:0 5px 15px #7dcfff4d}.secondary-btn:active{transform:translateY(0)}@keyframes fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 575.98px){.container{padding:15px;min-height:100vh}.title{font-size:2em;margin-bottom:20px}.tries-list{width:100%;max-width:100%}.try-item{grid-template-columns:1fr;gap:8px;padding:12px;margin:8px 0;text-align:center}.try-date{font-size:.9em;border-bottom:1px solid var(--border-color);padding-bottom:8px}.try-details span{font-size:.85em}.empty-message{font-size:1em;margin:30px 0}.secondary-btn{padding:12px 20px;font-size:1em;margin-right:5px}.secondary-btn:hover{transform:none}.secondary-btn:active{background-color:var(--color-type)}}@media (min-width: 576px) and (max-width: 767.98px){.container{padding:15px}.title{font-size:2.5em;margin-bottom:25px}.tries-list{width:100%;max-width:700px}.try-item{grid-template-columns:1fr 1fr 1fr 1fr;gap:12px;padding:12px}.secondary-btn{padding:13px 35px;font-size:1.1em}}@media (min-width: 768px){.container{padding:20px}.title{font-size:3.5em}.tries-list{max-width:800px}.try-item{padding:15px}}@media (min-width: 992px){.title{font-size:4em}.tries-list{max-width:900px}}@media (hover: none) and (pointer: coarse){.secondary-btn:hover{transform:none}.secondary-btn:active{background-color:var(--color-type)}}dialog{background:var(--bg-tertiary);color:var(--fg-secondary);border:2px solid var(--color-function);border-radius:12px;padding:30px;max-width:400px;width:90%;box-shadow:0 10px 30px #00000080;animation:fadeInUp .4s ease-out}dialog::backdrop{background:#000000b3;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}dialog h2{color:var(--color-function);margin-top:0;font-size:1.8em}.modal-actions{display:flex;justify-content:center;gap:15px;margin-top:25px}.close-modal-btn{background:transparent;border:1px solid var(--fg-secondary);color:var(--fg-secondary);border-radius:8px;padding:10px 20px;cursor:pointer}.close-modal-btn:hover{background:#ffffff1a;border-color:var(--color-type)}@media (max-width: 575.98px){dialog{padding:20px}dialog h2{font-size:1.5em}}";function ScorePage(){let historyEl,modalEl,clearBtnEl;const loadHistory=()=>{const r=store.get("game");r?(clearBtnEl.hidden=!1,r.forEach(({date,name,level:level2,score:score2})=>{historyEl.appendChild(h("div",{class:"try-item"},h("div",{class:"try-date"},"Date: ",new Date(date).toLocaleDateString()),h("div",{class:"try-details"},h("span",null,"Name: ",name),h("span",null,"Level: ",level2+1),h("span",null,"Score: ",score2))))})):(clearBtnEl.hidden=!0,historyEl.innerHTML="",historyEl.appendChild(h("div",{class:"empty-message"},"No games played yet. Start a new game!")))};useEffect(()=>{const{cleanUp}=useStyle(styles);return loadHistory(),cleanUp});const onClear=()=>{store.clean(),store.save(),loadHistory(),modalEl.close()};return h("div",{class:"container"},h("dialog",{ref:el=>modalEl=el},h("h2",null,"Clear Score History"),h("p",null,"Are you sure ?"),h("div",{class:"modal-actions"},h("button",{type:"button",class:"secondary-btn",onClick:()=>{onClear()}},"Clear"),h("button",{type:"button",class:"secondary-btn",onClick:()=>{modalEl.close()}},"Cancel"))),h("h1",{class:"title"},"Game Scores"),h("div",{class:"tries-list",ref:el=>historyEl=el}),h("button",{type:"button",class:"secondary-btn",onClick:()=>{navigate("menu")}},"Back to Home"),h("button",{type:"button",class:"secondary-btn",onClick:()=>{modalEl.showModal()},ref:el=>clearBtnEl=el},"Clear History"))}initRouter({menu:MenuPage,game:GamePage,score:ScorePage},"menu");
